<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36" version="25.0.3">
  <diagram name="Page-1" id="74e2e168-ea6b-b213-b513-2b3c1d86103e">
    <mxGraphModel dx="2534" dy="785" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="77e6c97f196da883-1" value="ServerBootstrap的启动主流程" style="swimlane;html=1;childLayout=stackLayout;startSize=20;rounded=0;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Monaco, monospace;fontSize=14;align=center;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="1" vertex="1">
          <mxGeometry x="-30" y="30" width="2845" height="750" as="geometry">
            <mxRectangle x="70" y="40" width="60" height="20" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="77e6c97f196da883-2" value="Main Thead" style="swimlane;html=1;startSize=20;fontFamily=Monaco, monospace;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;fontSize=14;swimlaneLine=1;absoluteArcSize=0;" parent="77e6c97f196da883-1" vertex="1">
          <mxGeometry y="20" width="1630" height="730" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-4" style="rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.137;exitY=1.1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;jumpStyle=arc;jumpSize=6;flowAnimation=0;shadow=0;anchorPointDirection=1;startFill=1;endFill=1;orthogonal=0;enumerate=0;comic=0;edgeStyle=orthogonalEdgeStyle;arcSize=41;curved=0;exitPerimeter=0;" parent="77e6c97f196da883-2" source="77e6c97f196da883-8" target="LekEVazieS8v96OrT8rm-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77e6c97f196da883-8" value="ServerBootstrap#bind()" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Monaco, monospace;fontSize=14;align=center;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="10" y="40" width="197.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;curved=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.137;exitY=0.967;exitDx=0;exitDy=0;exitPerimeter=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-3" target="LekEVazieS8v96OrT8rm-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-17" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=0.137;exitY=1.033;exitDx=0;exitDy=0;exitPerimeter=0;curved=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-3" target="LekEVazieS8v96OrT8rm-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-3" value="AbstractBootstrap#doBind()" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Monaco, monospace;fontSize=14;align=center;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="80" y="100" width="233.12" height="30" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;curved=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-6" target="LekEVazieS8v96OrT8rm-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-15" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;curved=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-6" target="LekEVazieS8v96OrT8rm-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-6" value="AbstractBootstrap#initAndRegister()" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Monaco, monospace;fontSize=14;align=left;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="170" y="150" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-10" value="&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;newChannel()&lt;/font&gt;&lt;/b&gt;,通过反射创建ServerSocketChannel,同时在也会在内部创建ChannelPipeline&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=14;fontFamily=Monaco, monospace;align=left;rounded=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="540" y="60" width="285" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;curved=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-6" target="LekEVazieS8v96OrT8rm-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="580" y="320" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-13" value="&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff3333&quot;&gt;init()&lt;/font&gt;,初始化ServerSocketChannel的属性，并且往它内部的ChannelPipeline中添加一个ChannelInitializer&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=14;fontFamily=Monaco, monospace;align=left;rounded=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="540" y="140" width="285" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;curved=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-14" target="LekEVazieS8v96OrT8rm-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-14" value="&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff3333&quot;&gt;config().group().register(channel)&lt;/font&gt;,从BossGroup中选择一个NioEventLoop执行注册&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=14;fontFamily=Monaco, monospace;align=left;rounded=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="540" y="230" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-16" value="AbstractBootstrap#doBind0()" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Monaco, monospace;fontSize=14;align=left;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="170" y="310" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;curved=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-18" target="LekEVazieS8v96OrT8rm-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-18" value="&lt;font color=&quot;#ff3333&quot;&gt;SingleThreadEventLoop#register(DefaultChannelPromise)&lt;/font&gt;, Channel和选中的NioEventLoop被封装成ChannelPromise, 最后被传递给了Channle关联的unsafe" style="whiteSpace=wrap;html=1;fontSize=14;fontFamily=Monaco, monospace;align=left;rounded=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="890" y="50" width="490" height="62.5" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-20" value="&lt;font color=&quot;#ff3333&quot;&gt;AbstractUnsafe#register(EventLoop, ChannelPromise)&lt;/font&gt;，把Channel和EventLoop进行绑定，然后往EventLoop提交一个异步执行的Task,这的Task就是执行&lt;font color=&quot;#ff3333&quot;&gt;register0(ChannelPromise)&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=14;fontFamily=Monaco, monospace;align=left;rounded=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="890" y="130" width="490" height="70" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-22" value="这个执行操作会调用NioEventLoop的父类&lt;span style=&quot;color: rgb(255, 51, 51);&quot;&gt;SingleThreadEventLoop#execute(task)&lt;/span&gt;方法，" style="whiteSpace=wrap;html=1;fontSize=14;fontFamily=Monaco, monospace;align=left;rounded=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;" parent="77e6c97f196da883-2" vertex="1">
          <mxGeometry x="838.59" y="305" width="592.81" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;hachureGap=4;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;curved=0;" parent="77e6c97f196da883-2" source="LekEVazieS8v96OrT8rm-20" target="LekEVazieS8v96OrT8rm-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LekEVazieS8v96OrT8rm-24" value="&lt;font face=&quot;Monaco, monospace&quot; style=&quot;font-size: 14px;&quot;&gt;提交操作是 eventLoop.execute(Runnable)&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="LekEVazieS8v96OrT8rm-23" vertex="1" connectable="0">
          <mxGeometry x="-0.1143" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="77e6c97f196da883-3" value="BossGroup#NioEventLoop" style="swimlane;html=1;startSize=20;fontFamily=Monaco, monospace;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;fontSize=14;" parent="77e6c97f196da883-1" vertex="1">
          <mxGeometry x="1630" y="20" width="760" height="730" as="geometry" />
        </mxCell>
        <mxCell id="77e6c97f196da883-4" value="workGroup#NioEventLoop" style="swimlane;html=1;startSize=20;fontFamily=Monaco, monospace;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DMonaco%252C%2Bmonospace;fontSize=14;" parent="77e6c97f196da883-1" vertex="1">
          <mxGeometry x="2390" y="20" width="455" height="730" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
